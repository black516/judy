function decimal(d,a){var c=parseFloat(d);if(isNaN(c)){return false}var c=Math.round(c*100)/100;var b=c.toString();var e=b.indexOf(".");if(e<0){e=b.length;b+="."}while(b.length<=e+a){b+="0"}return b}var _options={width:800,height:400,margin:[20,20,40,80],bgAttr:{fill:"#ffffff","stroke-width":0},formatX:null,formatY:null,getX:null,getY:null,showTracker:true,trackerAttr:{"stroke-width":1,opacity:0.5,fill:"#666666"},showGrid:true,gridXAttr:{"stroke-width":1,opacity:0.1,fill:"#666666",},gridYAttr:{"stroke-width":1,opacity:0.1,fill:"#666666",},tickSize:10,tickLength:5,tickInterval:null,tickFixed:2,tickYAttr:{"font-size":12,fill:"#666666",opacity:0.8},tickXAttr:{"font-size":12,fill:"#666666",opacity:0.8},getTickY:null,formatTickY:null,getTickX:null,formatTickX:null,lineAttr:{"stroke-width":4,opacity:1},lineHoverAttr:{"stroke-width":4,opacity:0.8},dotAttr:{"stroke-width":2,r:4,opacity:1,cursor:"pointer"},dotHoverAttr:{"stroke-width":2,r:5,opacity:1},colors:[["#bfc91c"],["#2c91e4"],["#e42c2c"]],timing:500,dotTiming:100};function Chart(a,d,f,c){var b=this;utils.extend(_options,c);b.setSize({w:_options.width,h:_options.height});b.setType(d);b.setData(f);b.setOptions(_options);b.setMax();b.setMin();var e=Raphael(a,b._options.width,b._options.height);b.setGC(e);b.init()}Chart.prototype={init:function(){this.elements={series:[],ticks:[[[],[]],[[],[]]],dots:[]}},setSize:function(a){this._size=a},getSize:function(){return this._size},setGC:function(a){this._gc=a},getGC:function(){return this._gc},setOptions:function(a){this._options=a},setType:function(type){this._type=type;eval("var Render = "+type+"Render");var render=new Render();this.setRender(render)},setRender:function(a){this._render=a},setData:function(a){this._data=a},draw:function(){this._render.draw(this,this._data,this._options)},getPixX:function(c,b){var a=this.getSize().w-this._options.margin[1]-this._options.margin[3];return this._options.margin[3]+b*a/(c-1)},getPixY:function(d){var c=this.getSize().h-this._options.margin[0]-this._options.margin[2];var a=this.getMax();var b=this.getMin();return c*(1-(d-b)/(a-b))+this._options.margin[0]},getY:function(b,a){if(this._options.getY){return this._options.getY(b,a)}return b[a]["y"]},getX:function(b,a){if(this._options.getX){return this._options.getX(b,a)}return b[a]["x"]},setMax:function(){var a;for(var c=0;c<this._data.series.length;c++){for(var b=0;b<this._data.series[c].length;b++){var d=this.getY(this._data.series[c],b);if(c==0&&b==0){a=d}else{if(d>a){a=d}}}}this._max=a;return a},getMax:function(){return this._max},setMin:function(){var c;for(var b=0;b<this._data.series.length;b++){for(var a=0;a<this._data.series[b].length;a++){var d=this.getY(this._data.series[b],a);if(b==0&&a==0){c=d}else{if(d<c){c=d}}}}this._min=c;return c},getMin:function(){return this._min},getTickY:function(d){var a=this.getMax();var c=this.getMin();var b=(a-c)/this._options.tickSize;var e=decimal(c+b*d,this._options.tickFixed);if(this._options.getTickY){return this._options.getTickY(e,d)}else{return e}},formatTickY:function(a){var b=this.getTickY(a);if(this._options.formatTickY){return this._options.formatTickY(b,a)}else{return b}},getTickX:function(a){var b=this._data.categories[a];if(this._options.getTickX){return this._options.getTickX(b,a)}else{return b}},formatTickX:function(a){var b=this.getTickX(a);if(this._options.formatTickX){return this._options.formatTickX(b,a)}else{return b}},getDots:function(a,f){var d=[];if(f==0){for(var c=0;c<this.elements.dots.length;c++){var h=this.elements.dots[c];for(var b=0;b<h.length;b++){var e=h[b];var g=e.getBBox();if(a>=g.x&&a<=g.x2){d.push(e)}}}}else{}return d}};function LineRender(){}LineRender.prototype={draw:function(c,d,b){var a=this;a._context=c;a._data=d;a._options=b;a._gc=a._context.getGC();a.init();a.buildAxes();a.buildChart();a.drawAxes();setTimeout(function(){a.drawBackground();a.drawChart();a.drawTips()},a._options.timing)},init:function(){},buildAxes:function(){},buildChart:function(){var o=this;var d=o._context.getPixY(o._context.getMin());for(var k=0;k<o._data.series.length;k++){var h=o._data.series[k];var p=o._gc.path("");p.attr(o._options.lineAttr);p.attr("stroke",o._options.colors[k]);o._context.elements.series.push(p);var f;var a=new Array();for(var g=0;g<h.length;g++){var l=o._context.getPixY(o._context.getY(h,g));var n=o._context.getPixX(h.length,g);if(g==0){f="M"+n+","+d}else{var m=o._context.getPixY(o._context.getY(h,g-1));var b=o._context.getPixX(h.length,g-1);var c=(n-b)/1.4;f+="S"+(b+c)+","+d+" "+n+","+d}var e=o._gc.circle(0,0);e.attr(o._options.dotAttr);e.attr("stroke",o._options.bgAttr.fill);e.attr("fill",o._options.colors[k]);e.attr("data",o._context.getY(h,g));e.attr("cx",n);e.attr("cy",d);e.mouseover(function(){this.animate(o._options.dotHoverAttr,o._options.dotTiming)}).mouseout(function(){this.animate(o._options.dotAttr,o._options.dotTiming)});a.push(e)}p.attr("path",f);o._context.elements.dots.push(a)}},drawBackground:function(){var a=this;var g=this._context.getPixY(this._context.getMin());var f=a._options.margin[3];var d=a._context.getSize().w-a._options.margin[1];var c=this._gc.rect(0,0,this._context.getSize().w,this._context.getSize().h);c.toBack();c.attr(a._options.bgAttr);if(this._options.showTracker){var e=this._gc.path("");e.attr(a._options.trackerAttr);var b=[];c.mousemove(function(l){for(var k=0;k<b.length;k++){for(var h=0;h<b[k].events.length;h++){if(b[k].events[h].name=="mouseout"){b[k].events[h].f.apply(b[k])}}}b=a._context.getDots(l.offsetX,0);for(var k=0;k<b.length;k++){for(var h=0;h<b[k].events.length;h++){if(b[k].events[h].name=="mouseover"){b[k].events[h].f.apply(b[k])}}}if(l.offsetX>=f&&l.offsetX<=d){e.attr("path","M"+l.offsetX+","+a._options.margin[0]+"L"+l.offsetX+","+g)}})}},drawAxes:function(){var f=this._context.getPixY(this._context.getMin());var c=this._gc.path("");c.attr(self._options.tickYAttr);c.attr("path","M"+this._options.margin[3]+","+this._options.margin[0]+"L"+this._options.margin[3]+","+(this._context.getSize().h-this._options.margin[2]));for(var b=0;b<this._options.tickSize+1;b++){var e=this._context.getPixY(this._context.getTickY(b));var d=this._gc.text(10,f,this._context.formatTickY(b));d.attr(this._options.tickYAttr);d.attr("width",this._options.margin[3]);d.attr("text-anchor","start");d.animate({y:e},self._options.timing);var c=this._gc.path("");c.attr(self._options.tickYAttr);c.attr("path","M"+this._options.margin[3]+","+f+"L"+(this._options.margin[3]-this._options.tickLength)+","+f);c.animate({path:"M"+this._options.margin[3]+","+e+"L"+(this._options.margin[3]-this._options.tickLength)+","+e},self._options.timing);if(this._options.showGrid){var c=this._gc.path("");c.attr(self._options.gridYAttr);c.attr("path","M"+this._options.margin[3]+","+f+"L"+(this._context.getSize().w-this._options.margin[1])+","+f);c.animate({path:"M"+this._options.margin[3]+","+e+"L"+(this._context.getSize().w-this._options.margin[1])+","+e},self._options.timing)}}c=this._gc.path("");c.attr(self._options.tickXAttr);c.attr("path","M"+this._options.margin[3]+","+(this._context.getSize().h-this._options.margin[2])+"L"+(this._context.getSize().w-this._options.margin[1])+","+(this._context.getSize().h-this._options.margin[2]));for(var b=0;b<this._data.categories.length;b++){var a=this._context.getPixX(this._data.categories.length,b);var d=this._gc.text(this._options.margin[3],f+3*this._options.tickLength,this._context.getTickX(b));d.attr(this._options.tickXAttr);d.attr("text-anchor","middle");d.animate({x:a},self._options.timing);var c=this._gc.path("");c.attr(self._options.tickXAttr);c.attr("path","M"+this._options.margin[3]+","+f+"L"+this._options.margin[3]+","+(f+this._options.tickLength));c.animate({path:"M"+a+","+f+"L"+a+","+(f+this._options.tickLength)},self._options.timing);if(this._options.showGrid){var c=this._gc.path("");c.attr(self._options.gridXAttr);c.attr("path","M"+this._options.margin[3]+","+this._options.margin[0]+"L"+this._options.margin[3]+","+f);c.animate({path:"M"+a+","+this._options.margin[0]+"L"+a+","+f},self._options.timing)}}},drawChart:function(){var q=this;var c=q._context.getPixY(q._context.getMin());var p=this._context.getSize().w;var l=this._context.getSize().h;for(var k=0;k<q._data.series.length;k++){var r=q._context.elements.series[k];dot=q._context.elements.dots[k];var g=q._data.series[k];var e;for(var f=0;f<g.length;f++){var m=q._context.getPixY(q._context.getY(g,f));var o=q._context.getPixX(g.length,f);if(f==0){e="M"+o+","+m}else{var n=q._context.getPixY(q._context.getY(g,f-1));var a=q._context.getPixX(g.length,f-1);var b=(o-a)/1.4;e+="S"+(a+b)+","+m+" "+o+","+m}}r.animate({path:e},q._options.timing);for(var f=0;f<dot.length;f++){var d=dot[f];var m=q._context.getPixY(q._context.getY(g,f));d.animate({cy:m},q._options.timing)}}},drawTips:function(){}};var utils={extend:function(){var k,c,a,b,g,h,f=arguments[0]||{},e=1,d=arguments.length,j=false;if(typeof f==="boolean"){j=f;f=arguments[1]||{};e=2}if(typeof f!=="object"&&!this.isFunction(f)){f={}}if(d===e){f=this;--e}for(;e<d;e++){if((k=arguments[e])!=null){for(c in k){a=f[c];b=k[c];if(f===b){continue}if(j&&b&&(this.isPlainObject(b)||(g=this.isArray(b)))){if(g){g=false;h=a&&this.isArray(a)?a:[]}else{h=a&&this.isPlainObject(a)?a:{}}f[c]=this.extend(j,h,b)}else{if(b!==undefined){f[c]=b}}}}}return f}};